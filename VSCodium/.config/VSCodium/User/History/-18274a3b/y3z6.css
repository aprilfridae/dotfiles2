/* Matugen Colors for Zen */
:root {
  --zen-primary: {{colors.primary.default.hex}};
  --zen-background: {{colors.surface.default.hex}};
  --zen-sidebar-bg: {{colors.surface_container.default.hex}};
  --zen-urlbar-bg: {{colors.surface_container_high.default.hex}};
  --zen-text: {{colors.on_surface.default.hex}};
}

/* 1. THE MAIN BACKGROUND FIX */
/* This targets the area behind the website and the "New Tab" page */
#main-window, 
#browser, 
.browserStack, 
#tabbrowser-tabpanels {
    background-color: var(--zen-background) !important;
}

/* 2. THE TOP BAR & NAV */
#nav-bar, 
#navigator-toolbox, 
#TabsToolbar {
    background-color: var(--zen-background) !important;
    border: none !important;
    box-shadow: none !important;
}

/* 3. THE SIDEBAR FIX */
/* Zen uses a specific box for its vertical tabs/sidebar */
#sidebar-box, 
#sidebar-header, 
#zen-sidebar-header {
    background-color: var(--zen-sidebar-bg) !important;
}

/* 4. URL BAR */
#urlbar-background {
    background-color: var(--zen-urlbar-bg) !important;
}

/* 5. FIX FOR 'NEW TAB' PAGE (The most stubborn part) */
@-moz-document url("about:newtab"), url("about:home"), url("about:blank") {
    body {
        background-color: var(--zen-background) !important;
    }
}

/* ... keep your previous variables at the top ... */

/* 1. REMOVE BOUNDING BOX BORDERS */
/* This kills the grey lines around the URL bar and the main website view */
#zen-main-app-wrapper,
#zen-appcontent-wrapper,
.browserStack,
#nav-bar,
#navigator-toolbox,
#sidebar-box {
    border: none !important;
    box-shadow: none !important;
    outline: none !important;
}

/* 2. UNIFY CONTAINER COLORS */
/* Zen wraps the website in several layers; we need them all to be the same hex */
#tabbrowser-tabpanels,
#tabbrowser-tabpanels > hbox,
.deck-selected {
    background-color: var(--zen-background) !important;
}

/* 3. THE URL BAR "FLOATING" BOX FIX */
/* Zen's URL bar often has a container that stays grey */
#urlbar {
    --urlbar-box-bgcolor: var(--zen-urlbar-bg) !important;
}

#urlbar-background {
    background-color: var(--zen-urlbar-bg) !important;
    border: 1px solid {{colors.outline_variant.default.hex}} !important;
}

/* 4. REMOVE SEPARATION MARGINS (Optional) */
/* If you want the website to touch the edges without a "gap" */
:root {
    --zen-element-separation: 0px !important;
    --zen-view-padding: 0px !important;
}

/* 5. FIX THE SIDEBAR SEPARATOR */
/* That vertical grey line between the tabs and the website */
#sidebar-splitter {
    display: none !important;
}